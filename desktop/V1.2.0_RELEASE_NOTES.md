# v1.2.0 版本说明

## 🎉 重大更新：完整Web功能集成

v1.2.0 是一个重大版本更新，将完整的Web版功能集成到桌面应用中，实现了真正的"Desktop = Electron包装器 + Web完整版"架构。

## ✨ 新增功能

### 1. 完整Web功能
- ✅ 集成了Web版的所有功能（视频上传、AI分析、智能切片、字幕生成等）
- ✅ 使用与Web版相同的UI界面和用户体验
- ✅ 支持所有Web版的高级特性（断点续传、任务队列、进度显示等）

### 2. 本地存储支持
- ✅ 自动将上传的视频和处理结果保存到本地
- ✅ 不依赖云端S3存储，完全本地化
- ✅ 存储位置：`%APPDATA%/video-slicer-desktop/storage` (Windows)

### 3. 自动登录
- ✅ Desktop模式下自动登录，无需OAuth认证
- ✅ 使用本地管理员账户，拥有完整权限
- ✅ 简化用户体验，开箱即用

### 4. 本地数据库
- ✅ 使用本地MySQL数据库存储任务和用户数据
- ✅ 完整的数据持久化支持
- ✅ 支持数据备份和恢复

## 🔧 技术架构

### 架构设计
```
Desktop App
├── Electron (窗口管理)
├── Web Server (完整Web版)
│   ├── Express + tRPC
│   ├── React前端
│   ├── AI处理引擎
│   └── 视频处理服务
├── Local Storage (文件存储)
└── MySQL (数据库)
```

### 核心组件
- **Electron**: 提供桌面窗口和系统集成
- **Web Server**: 运行完整的Web应用服务器
- **Storage Adapter**: 自动切换S3/本地存储
- **Auth Adapter**: Desktop模式自动登录

## 📦 安装要求

### 系统要求
- **操作系统**: Windows 10/11 (64位)
- **内存**: 最低4GB，推荐8GB
- **硬盘**: 至少2GB可用空间
- **MySQL**: 5.7或更高版本

### 依赖软件
1. **MySQL数据库** (必需)
   - 用于存储任务和用户数据
   - 参考 `MYSQL_SETUP.md` 安装配置

2. **FFmpeg** (必需)
   - 用于视频处理
   - 已集成在安装包中

3. **AI服务API密钥** (必需)
   - Alibaba Cloud ASR (语音识别)
   - DeepSeek API (AI分析)

## 🚀 快速开始

### 1. 安装MySQL
```bash
# 参考 MYSQL_SETUP.md 安装MySQL
# 创建数据库
mysql -u root -p
CREATE DATABASE video_slicer CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
EXIT;
```

### 2. 配置环境变量
在应用安装目录创建 `.env` 文件：
```env
DESKTOP_MODE=true
NODE_ENV=production
DATABASE_URL=mysql://root:your_password@localhost:3306/video_slicer

# AI服务API密钥
ALIBABA_CLOUD_ACCESS_KEY_ID=your_key_id
ALIBABA_CLOUD_ACCESS_KEY_SECRET=your_key_secret
ALIBABA_CLOUD_APP_KEY=your_app_key
DEEPSEEK_API_KEY=your_deepseek_key
```

### 3. 运行应用
双击桌面图标或开始菜单中的"AI视频智能切片"启动应用。

## 📝 使用说明

### 基本流程
1. **上传视频**: 点击"上传视频"按钮，选择要处理的视频文件
2. **AI分析**: 系统自动提取音频、转录文本、AI分析内容
3. **智能切片**: 根据AI分析结果，自动选择精彩片段
4. **生成字幕**: 自动生成SRT字幕文件
5. **下载结果**: 下载处理后的视频片段和字幕

### 高级功能
- **断点续传**: 大文件上传支持暂停/恢复
- **任务队列**: 支持多个视频同时处理
- **进度显示**: 实时显示处理进度
- **历史记录**: 查看所有处理过的视频任务

## 🔄 从v1.1.0升级

### 主要变化
- v1.1.0: 简单的任务管理UI + SQLite
- v1.2.0: 完整Web功能 + MySQL

### 升级步骤
1. 备份v1.1.0的数据（如果有）
2. 卸载v1.1.0
3. 安装MySQL数据库
4. 安装v1.2.0
5. 配置环境变量
6. 启动应用

**注意**: v1.1.0的SQLite数据无法直接迁移到v1.2.0的MySQL，需要重新处理视频。

## 🐛 已知问题

1. **首次启动较慢**
   - 原因：需要初始化数据库和创建存储目录
   - 解决：耐心等待，后续启动会快很多

2. **大文件处理内存占用高**
   - 原因：视频处理需要大量内存
   - 建议：处理大文件时关闭其他应用

3. **MySQL连接失败**
   - 原因：MySQL服务未启动或配置错误
   - 解决：检查MySQL服务状态和DATABASE_URL配置

## 📊 性能优化

### 建议配置
- **MySQL缓冲池**: 1GB以上
- **视频存储**: SSD硬盘
- **网络**: 稳定的互联网连接（AI服务需要）

### 优化建议
1. 定期清理旧的视频文件
2. 备份MySQL数据库
3. 关闭不必要的后台程序
4. 使用有线网络而非WiFi

## 🔐 安全建议

1. **数据库安全**
   - 使用强密码
   - 不要使用root用户
   - 定期备份数据

2. **API密钥安全**
   - 不要分享.env文件
   - 定期更换API密钥
   - 限制API密钥权限

3. **文件安全**
   - 定期清理敏感视频
   - 加密重要文件
   - 使用防病毒软件

## 📞 获取帮助

### 文档
- `MYSQL_SETUP.md` - MySQL安装配置指南
- `env.example.txt` - 环境变量配置示例
- `LOCAL_BUILD_GUIDE.md` - 本地构建指南

### 问题反馈
- GitHub Issues: https://github.com/your-repo/issues
- 邮箱: support@example.com

## 🎯 下一步计划

### v1.3.0 (计划中)
- [ ] 支持更多视频格式
- [ ] 批量处理功能
- [ ] 自定义切片规则
- [ ] 导出为多种格式

### v2.0.0 (远期)
- [ ] 本地AI模型支持（离线处理）
- [ ] 视频编辑器集成
- [ ] 云端同步功能
- [ ] 多语言支持

## 📄 许可证

MIT License

## 🙏 致谢

感谢所有贡献者和用户的支持！

---

**发布日期**: 2026-01-31  
**版本号**: v1.2.0  
**构建号**: 1.2.0
